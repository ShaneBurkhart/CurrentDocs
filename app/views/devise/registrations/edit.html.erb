<% content_for :title, "Edit Account" %>
<div class="section">
	<div class="container">
		<div class="row">
			<div class="span7">
				<h2>Edit <%= resource_name.to_s.humanize %></h2>
				<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => 'form-vertical' }) do |f| %>
				  <%= f.error_notification %>
				  <%= display_base_errors resource %>
				  <%= f.input :first_name, :autofocus => true %>
				  <%= f.input :last_name %>
                                  <%= f.input :company%>
				  <%= f.input :email, :required => true %>
				  <%= f.input :password, :autocomplete => "off", :hint => "leave it blank if you don't want to change it", :required => false %>
				  <%= f.input :password_confirmation, :required => false %>
				  <%= f.input :current_password, :hint => "we need your current password to confirm your changes", :required => true %>
				  <%= f.button :submit, 'Update', :class => 'button button-blue' %>
				<% end %>
			</div>
			<div class="span5">
				<h3>Account Type</h3>
				<% if current_user.type %>
					<p><%= current_user.type %></p>
				<% end %>
				<% if current_user.type == nil %>
					<%= link_to "Select Account Type", account_path, class: "button button-blue" %>
				<% elsif current_user.type == "Viewer" %>
                                  <%= link_to "Upgrade to Manager", subscription_path, class: "button button-green" %>
				<% else %>
          <%= simple_form_for(current_user, as: User, :url => subscription_path, :html => { :method => :put, :class => 'form-vertical' }) do |f| %>
            <%= f.input :type, as: :hidden, input_html: {value: "Viewer"} %>
            <%= f.submit "Downgrade to Viewer", class: "button button-red" %>
          <% end %>
				<% end %>
				<br>
				<h3>Cancel my account</h3>
				<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>.</p>
			</div>
		</div>
	</div>
</div>
